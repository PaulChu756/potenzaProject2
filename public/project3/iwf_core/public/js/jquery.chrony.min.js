(function(e){var t={init:function(n){return this.each(function(){var r=this,i=e(r);r.opt=e.extend(true,{},e.fn.chrony.defaults,n);if(i.data("chrony")){return}i.data("chrony",true);var s=r.opt,o="<span>:</span>";if(s.text){var u=s.text.split(":");if(u.length!=3){e.error("The format must be the following HH:mm:ss!")}s.second=u[2];s.minute=u[1];s.hour=u[0]}else if(s.hours){if(s.hours>=24){s.hour=23;s.minute=59;s.second=59}else{s.second=0;s.minute=0;s.hour=s.hours}}else if(s.minutes){s.second=0;s.minute=s.minutes%60;s.hour=(s.minutes-s.minute)/60}else if(s.seconds){s.second=s.seconds%60;s.minute=(s.seconds-s.second)/60%60;s.hour=(s.seconds-s.second-s.minute*60)/60/60}var a=t.checkTime(s.hour,s.minute,s.second);if(a){i.html('<span style="color: #F00; font-size: 9px;">Number out of range!</span>');e.error(a)}var f=t.getNumber(s.hour),l=t.getNumber(s.minute),c=t.getNumber(s.second),h=e("<span />",{id:"hour",html:f}),p=e("<span />",{id:"minute",html:l}),d=e("<span />",{id:"second",html:c}),v=0;if(s.displayHours){i.append(h);if(s.displayMinutes||s.displaySeconds){i.append(o)}}if(s.displayMinutes){i.append(p);if(s.displaySeconds){i.append(o)}}if(s.displaySeconds){i.append(d)}var m=i.children("span");t.checkAlert.call(r,f,l,c);v=setInterval(function(){if(r.opt.blink){m.fadeOut(r.opt.blinkTime,function(){e(this).fadeIn(r.opt.blinkTime)})}if(c==0){if(l==0){if(f>0){f=t.getNumber(f-r.opt.decrement);l=59;c=59;h.html(f);p.html(l);d.html(c)}}else{l=t.getNumber(l-r.opt.decrement);c=59;p.html(l);d.html(c)}}else{c=t.getNumber(c-r.opt.decrement);d.html(c)}if(r.opt.finish&&c==0&&l==0&&f==0){r.opt.finish.call(r);clearInterval(v)}t.checkAlert.call(r,f,l,c)},1e3)})},checkAlert:function(t,n,r){var i=e(this),s=this.opt.alert;if(s&&i.css("color")!=""){if(t<=s.hour&&n<=s.minute&&r<=s.second){i.css("color",s.color)}}},checkTime:function(e,t,n){if(e<0){return"The hour must be >= 0 or <= 24"}if(t<0||t>59){return"The minute must be >= 0 or <= 59"}if(n<0||n>59){return"The second must be >= 0 or <= 59"}},getNumber:function(e){return e<10?"0"+(e<0?"0":e):e},set:function(t){return this.each(function(){this.opt=e.extend({},e.fn.chrony.defaults,e(this).data("options"),t)})}};e.fn.chrony=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist!")}};e.fn.chrony.defaults={alert:{color:"#F00",hour:0,minute:0,second:10},blink:false,blinkTime:130,finish:undefined,decrement:1,displayHours:true,displayMinutes:true,displaySeconds:true,hour:0,hours:undefined,minute:0,minutes:undefined,second:0,seconds:undefined,text:undefined}})(jQuery)